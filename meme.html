<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üé≠ –ì–ï–ù–ï–†–ê–¢–û–† –ú–ï–ú–û–í –° –£–ù–ò–ñ–ï–ù–ò–Ø–ú–ò üé≠</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: linear-gradient(45deg, #ff0000, #8B0000, #000000);
            font-family: Arial, sans-serif; color: white; padding: 20px;
            text-align: center;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { 
            padding: 20px; background: rgba(0,0,0,0.8); 
            border-radius: 15px; border: 4px solid yellow; margin-bottom: 20px;
        }
        h1 { 
            font-size: 2.5em; text-shadow: 4px 4px 0 #ff0000; color: #ffff00; 
            margin-bottom: 10px;
        }
        .back-btn {
            background: linear-gradient(45deg, #ff0000, #8B0000); color: white;
            border: none; padding: 12px 25px; font-size: 1.2em; font-weight: bold;
            cursor: pointer; border-radius: 8px; margin: 10px;
        }
        .nav-buttons {
            margin: 20px 0;
        }
        .nav-btn {
            background: linear-gradient(45deg, #ffff00, #ff9900); color: black;
            border: none; padding: 12px 20px; font-size: 1.1em; font-weight: bold;
            cursor: pointer; border-radius: 8px; margin: 5px;
        }
        .meme-creator {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
            margin: 30px 0;
        }
        .controls-panel {
            background: rgba(0,0,0,0.7); padding: 20px; border-radius: 15px;
            border: 3px solid red;
        }
        .meme-preview {
            background: rgba(0,0,0,0.7); padding: 20px; border-radius: 15px;
            border: 3px solid yellow; display: flex; align-items: center;
            justify-content: center; min-height: 400px;
        }
        .meme-canvas {
            max-width: 100%; max-height: 350px; border: 3px solid white;
            border-radius: 10px; background: white;
        }
        .control-group {
            margin: 15px 0; text-align: left;
        }
        label { display: block; margin-bottom: 5px; color: yellow; }
        select, input, textarea {
            width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #ff0000;
            background: #333; color: white; font-size: 1em;
        }
        textarea { height: 80px; resize: vertical; }
        .template-options {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
            margin: 10px 0;
        }
        .template-btn {
            background: #444; color: white; border: 2px solid #666;
            padding: 10px; border-radius: 8px; cursor: pointer;
            transition: all 0.3s;
        }
        .template-btn:hover {
            background: #666; border-color: yellow;
        }
        .template-btn.active {
            background: #ff0000; border-color: yellow; color: yellow;
        }
        .action-buttons {
            display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
            margin: 20px 0;
        }
        .action-btn {
            background: linear-gradient(45deg, #ff0000, #8B0000); color: white;
            border: none; padding: 15px; font-size: 1.1em; font-weight: bold;
            cursor: pointer; border-radius: 8px; transition: all 0.3s;
        }
        .action-btn:hover {
            transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255,0,0,0.4);
        }
        .memes-gallery {
            margin: 40px 0;
        }
        .gallery-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px; margin: 20px 0;
        }
        .gallery-item {
            background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px;
            border: 2px solid #ff4444; cursor: pointer; transition: all 0.3s;
        }
        .gallery-item:hover {
            transform: scale(1.05); border-color: yellow;
        }
        .gallery-item img {
            width: 100%; height: 150px; object-fit: cover; border-radius: 8px;
        }
        .marquee {
            background: #ff0000; padding: 10px; border-radius: 8px;
            margin: 15px 0; border: 2px solid yellow;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé≠ –ì–ï–ù–ï–†–ê–¢–û–† –ú–ï–ú–û–í –° –£–ù–ò–ñ–ï–ù–ò–Ø–ú–ò üé≠</h1>
            <div class="nav-buttons">
                <button class="back-btn" onclick="goToMain()">üîô –ù–ê –ì–õ–ê–í–ù–£–Æ</button>
                <button class="nav-btn" onclick="goToGame()">üéÆ –í –ò–ì–†–£</button>
            </div>
        </div>

        <div class="marquee">
            <marquee behavior="scroll" direction="left">
                üé® –°–û–ó–î–ê–í–ê–ô –ú–ï–ú–´ –ü–†–û –°–´–ù–ê –®–õ–Æ–•–ò! –î–ï–õ–ò–°–¨ –° –î–†–£–ó–¨–Ø–ú–ò! –£–ù–ò–ñ–ê–ô –í –°–¢–ò–õ–ï! üé®
            </marquee>
        </div>

        <div class="meme-creator">
            <div class="controls-panel">
                <h2 style="color: yellow; margin-bottom: 20px;">‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –ú–ï–ú–ê</h2>
                
                <div class="control-group">
                    <label>üì∑ –®–ê–ë–õ–û–ù –ú–ï–ú–ê:</label>
                    <div class="template-options">
                        <button class="template-btn active" onclick="selectTemplate('son')">–°–´–ù –®–õ–Æ–•–ò</button>
                        <button class="template-btn" onclick="selectTemplate('mother')">–¢–ê–ù–Ø –®–õ–Æ–•–ê</button>
                        <button class="template-btn" onclick="selectTemplate('brother')">–ù–ò–ö–ò–¢–ê –î–ï–ë–ò–õ</button>
                        <button class="template-btn" onclick="selectTemplate('father')">–°–ê–®–ê –ê–õ–ö–û–ù–ê–í–¢</button>
                    </div>
                </div>

                <div class="control-group">
                    <label>üìù –¢–ï–ö–°–¢ –°–í–ï–†–•–£:</label>
                    <textarea id="topText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –≤–µ—Ä—Ö–∞ –º–µ–º–∞...">–°–ú–û–¢–†–ò–¢–ï –ö–ê–ö–û–ô –°–´–ù –®–õ–Æ–•–ò!</textarea>
                </div>

                <div class="control-group">
                    <label>üìù –¢–ï–ö–°–¢ –°–ù–ò–ó–£:</label>
                    <textarea id="bottomText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –Ω–∏–∑–∞ –º–µ–º–∞...">–¢–ê–ù–Ø –®–õ–Æ–•–ê –¢–ê–ö–ñ–ï –°–¢–´–î–ò–¢–°–Ø!</textarea>
                </div>

                <div class="control-group">
                    <label>üé® –¶–í–ï–¢ –¢–ï–ö–°–¢–ê:</label>
                    <select id="textColor">
                        <option value="white">–ë–µ–ª—ã–π</option>
                        <option value="yellow">–ñ–µ–ª—Ç—ã–π</option>
                        <option value="red">–ö—Ä–∞—Å–Ω—ã–π</option>
                        <option value="black">–ß–µ—Ä–Ω—ã–π</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>üî§ –†–ê–ó–ú–ï–† –¢–ï–ö–°–¢–ê:</label>
                    <select id="textSize">
                        <option value="24">–ú–∞–ª–µ–Ω—å–∫–∏–π</option>
                        <option value="32" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="48">–ë–æ–ª—å—à–æ–π</option>
                        <option value="64">–û–≥—Ä–æ–º–Ω—ã–π</option>
                    </select>
                </div>

                <div class="action-buttons">
                    <button class="action-btn" onclick="generateMeme()">üé® –°–û–ó–î–ê–¢–¨ –ú–ï–ú</button>
                    <button class="action-btn" onclick="downloadMeme()">üíæ –°–ö–ê–ß–ê–¢–¨ –ú–ï–ú</button>
                    <button class="action-btn" onclick="shareMeme()">üì§ –ü–û–î–ï–õ–ò–¢–¨–°–Ø</button>
                    <button class="action-btn" onclick="randomMeme()">üé≤ –°–õ–£–ß–ê–ô–ù–´–ô –ú–ï–ú</button>
                </div>
            </div>

            <div class="meme-preview">
                <canvas id="memeCanvas" width="500" height="400" class="meme-canvas"></canvas>
            </div>
        </div>

        <div class="memes-gallery">
            <h2 style="color: yellow; margin-bottom: 20px;">üìö –ì–ê–õ–ï–†–ï–Ø –ì–û–¢–û–í–´–• –ú–ï–ú–û–í</h2>
            <div class="gallery-grid" id="memesGallery">
                <!-- –ì–æ—Ç–æ–≤—ã–µ –º–µ–º—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ -->
            </div>
        </div>

        <div style="margin-top: 30px; padding: 15px; background: rgba(255,0,0,0.3); border-radius: 10px;">
            <h3 style="color: yellow;">üí° –ò–î–ï–ò –î–õ–Ø –ú–ï–ú–û–í:</h3>
            <p>"–°–´–ù –®–õ–Æ–•–ò –ö–û–ì–î–ê –í–ò–î–ò–¢ –ó–ï–†–ö–ê–õ–û"</p>
            <p>"–¢–ê–ù–Ø –®–õ–Æ–•–ê: –ú–ê–¢–¨ –ì–û–î–ê"</p>
            <p>"–ù–ò–ö–ò–¢–ê –î–ï–ë–ò–õ –†–ï–®–ê–ï–¢ –ó–ê–î–ê–ß–£ 2+2"</p>
            <p>"–°–ê–®–ê –ê–õ–ö–û–ù–ê–í–¢ –ò –ï–ì–û –õ–Æ–ë–ò–ú–ê–Ø –ë–£–¢–´–õ–ö–ê"</p>
        </div>
    </div>

    <script>
        let currentTemplate = 'son';
        const canvas = document.getElementById('memeCanvas');
        const ctx = canvas.getContext('2d');

        // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
        const templateImages = {
            son: 'photo2.jpg',
            mother: 'photo1.jpg', 
            brother: 'photo3.jpg',
            father: 'photo4.jpg'
        };

        // –ì–æ—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –º–µ–º–æ–≤
        const memeTexts = [
            { top: "–°–´–ù –®–õ–Æ–•–ò –ö–û–ì–î–ê", bottom: "–í–ò–î–ò–¢ –°–ï–ë–Ø –í –ó–ï–†–ö–ê–õ–ï" },
            { top: "–¢–ê–ù–Ø –®–õ–Æ–•–ê", bottom: "–ú–ê–¢–¨-–ì–ï–†–û–ò–ù–Ø –†–ê–ô–û–ù–ê" },
            { top: "–ù–ò–ö–ò–¢–ê –î–ï–ë–ò–õ", bottom: "–†–ï–®–ê–ï–¢ –°–õ–û–ñ–ù–£–Æ –ó–ê–î–ê–ß–£ 2+2" },
            { top: "–°–ê–®–ê –ê–õ–ö–û–ù–ê–í–¢", bottom: "–ò –ï–ì–û –õ–Æ–ë–ò–ú–ê–Ø –ë–£–¢–´–õ–ö–ê" },
            { top: "–≠–¢–û–¢ –¢–ò–ü", bottom: "–°–´–ù –®–õ–Æ–•–ò –¢–ê–ù–ò" },
            { top: "–ì–ï–ù–´ –®–õ–Æ–•–ò", bottom: "–ü–†–û–Ø–í–õ–Ø–Æ–¢–°–Ø" },
            { top: "–¶–ò–†–ö –£–†–û–î–û–í", bottom: "–í –ü–û–õ–ù–û–ú –°–û–°–¢–ê–í–ï" },
            { top: "–î–ù–û –û–ë–©–ï–°–¢–í–ê", bottom: "–î–û–°–¢–ò–ì–ù–£–¢–û" }
        ];

        function goToMain() {
            window.location.href = 'index.html';
        }

        function goToGame() {
            window.location.href = 'game.html';
        }

        function selectTemplate(template) {
            currentTemplate = template;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.template-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            generateMeme();
        }

        function generateMeme() {
            const topText = document.getElementById('topText').value;
            const bottomText = document.getElementById('bottomText').value;
            const textColor = document.getElementById('textColor').value;
            const textSize = parseInt(document.getElementById('textSize').value);
            
            const img = new Image();
            img.onload = function() {
                // –û—á–∏—â–∞–µ–º canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –†–∏—Å—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—Å—Ç–∞
                ctx.fillStyle = textColor;
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 3;
                ctx.textAlign = 'center';
                ctx.font = `bold ${textSize}px Arial`;
                
                // –¢–µ–∫—Å—Ç —Å–≤–µ—Ä—Ö—É
                ctx.strokeText(topText, canvas.width / 2, 50);
                ctx.fillText(topText, canvas.width / 2, 50);
                
                // –¢–µ–∫—Å—Ç —Å–Ω–∏–∑—É
                ctx.strokeText(bottomText, canvas.width / 2, canvas.height - 20);
                ctx.fillText(bottomText, canvas.width / 2, canvas.height - 20);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥–∞–ª–µ—Ä–µ—é
                addToGallery();
            };
            
            img.src = templateImages[currentTemplate];
            img.onerror = function() {
                // –ï—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#ff0000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'white';
                ctx.font = 'bold 24px Arial';
                ctx.fillText('–§–û–¢–û –°–´–ù–ê –®–õ–Æ–•–ò', canvas.width / 2, canvas.height / 2);
                ctx.fillText(topText, canvas.width / 2, 50);
                ctx.fillText(bottomText, canvas.width / 2, canvas.height - 20);
            };
        }

        function addToGallery() {
            const gallery = document.getElementById('memesGallery');
            const dataURL = canvas.toDataURL('image/png');
            
            const galleryItem = document.createElement('div');
            galleryItem.className = 'gallery-item';
            galleryItem.innerHTML = `
                <img src="${dataURL}" alt="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ–º">
                <div style="margin-top: 8px; font-size: 0.9em;">${document.getElementById('topText').value}</div>
            `;
            
            galleryItem.onclick = function() {
                // –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º–µ–º –≤ –≥–∞–ª–µ—Ä–µ–µ - –∑–∞–≥—Ä—É–∂–∞–µ–º –µ–≥–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
                const img = new Image();
                img.onload = function() {
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                };
                img.src = dataURL;
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ
            if (gallery.children.length < 12) {
                gallery.appendChild(galleryItem);
            }
        }

        function downloadMeme() {
            const link = document.createElement('a');
            link.download = `meme-syn-shlyuhi-${Date.now()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            speakText("–ú–µ–º —Å–∫–∞—á–∞–Ω! –î–µ–ª–∏—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –∏ —É–Ω–∏–∂–∞–π —ç—Ç–æ–≥–æ —É—ë–±–∫–∞!");
        }

        function shareMeme() {
            if (navigator.share) {
                canvas.toBlob(function(blob) {
                    const file = new File([blob], "meme-syn-shlyuhi.png", { type: "image/png" });
                    navigator.share({
                        files: [file],
                        title: '–ü–æ—Å–º–æ—Ç—Ä–∏ –∫–∞–∫–æ–π —Å—ã–Ω —à–ª—é—Ö–∏!',
                        text: '–Ø —Å–æ–∑–¥–∞–ª –º–µ–º –ø—Ä–æ —Å—ã–Ω–∞ —à–ª—é—Ö–∏! –ü–æ—Å–º–æ—Ç—Ä–∏!'
                    });
                });
            } else {
                speakText("–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ! –ê —Ç–∞–∫ –∫–∞—á–∞–π –º–µ–º –∏ –∫–∏–¥–∞–π –≤ —á–∞—Ç—ã!");
            }
        }

        function randomMeme() {
            const randomText = memeTexts[Math.floor(Math.random() * memeTexts.length)];
            document.getElementById('topText').value = randomText.top;
            document.getElementById('bottomText').value = randomText.bottom;
            
            // –°–ª—É—á–∞–π–Ω—ã–π —à–∞–±–ª–æ–Ω
            const templates = Object.keys(templateImages);
            const randomTemplate = templates[Math.floor(Math.random() * templates.length)];
            selectTemplate(randomTemplate);
            
            speakText("–°–ª—É—á–∞–π–Ω—ã–π –º–µ–º —Å–æ–∑–¥–∞–Ω! –£–Ω–∏–∂–∞–π –≤ —Å–ª—É—á–∞–π–Ω–æ–º —Å—Ç–∏–ª–µ!");
        }

        function speakText(text) {
            if ('speechSynthesis' in window) {
                const msg = new SpeechSynthesisUtterance();
                msg.text = text;
                msg.rate = 1.1;
                msg.pitch = 0.9;
                window.speechSynthesis.speak(msg);
            }
        }

        // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –º–µ–º–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            generateMeme();
            speakText("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–µ–º–æ–≤! –°–æ–∑–¥–∞–≤–∞–π —É–Ω–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ–º—ã –ø—Ä–æ —Å—ã–Ω–∞ —à–ª—é—Ö–∏!");
        }
    </script>
</body>
</html>